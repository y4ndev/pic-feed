"use client";
// –£–∫–∞–∑—ã–≤–∞–µ—Ç, —á—Ç–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ (–Ω–µ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ), –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ö—É–∫–æ–≤, —Å–æ–±—ã—Ç–∏–π –∏ —Ç.–ø. –≤ Next.js 13+

import { useEffect, useState } from "react"; // –ò–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ö—É–∫–∏ React
import { useRouter } from "next/navigation"; // –•—É–∫ –¥–ª—è –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ (–ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è) –≤ Next.js
import { signOut, onAuthStateChanged } from "firebase/auth"; // –ò–º–ø–æ—Ä—Ç –∏–∑ Firebase: –≤—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ –∏ —Å–ª–µ–∂–µ–Ω–∏–µ –∑–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
import { auth } from "@/lib/firebase"; // –ò–º–ø–æ—Ä—Ç –æ–±—ä–µ–∫—Ç–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ñ–∞–π–ª–µ
import PrivateRoute from "@/components/PrivateRoute/PrivateRoute";
// –û–±–æ—Ä–∞—á–∏–≤–∞–µ–º —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤ —ç—Ç–æ—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç, —á—Ç–æ–±—ã –Ω–∞ –Ω–µ—ë –º–æ–≥–ª–∏ –∑–∞–π—Ç–∏ —Ç–æ–ª—å–∫–æ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

const Dashboard = () => {
  const router = useRouter(); // –•—É–∫, —Å –ø–æ–º–æ—â—å—é –∫–æ—Ç–æ—Ä–æ–≥–æ –º–æ–∂–Ω–æ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –¥—Ä—É–≥–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
  const [userEmail, setUserEmail] = useState<string | null>(null);
  // –°–æ—Ö—Ä–∞–Ω—è–µ–º email –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–∞ —ç–∫—Ä–∞–Ω–µ)

  useEffect(() => {
    // useEffect —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
    const unsubscribe = onAuthStateChanged(auth, (user) => {
      // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –∏–∑–º–µ–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –≤ Firebase
      if (user) {
        // –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω
        setUserEmail(user.email); // –°–æ—Ö—Ä–∞–Ω—è–µ–º –µ–≥–æ email –≤ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
      }
    });

    return () => unsubscribe();
    // –û—á–∏—â–∞–µ–º –ø–æ–¥–ø–∏—Å–∫—É –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –Ω–µ –±—ã–ª–æ —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏
  }, []);

  const handleLogout = async () => {
    // –§—É–Ω–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    await signOut(auth); // –í—ã—Ö–æ–¥ –∏–∑ –∞–∫–∫–∞—É–Ω—Ç–∞ Firebase
    router.push("/login"); // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –≤—Ö–æ–¥–∞
  };

  const handelFeed = () => {
    router.push("../feed");
  };

  return (
    <PrivateRoute>
      {/* –ó–∞—â–∏—â—ë–Ω–Ω—ã–π –º–∞—Ä—à—Ä—É—Ç. –ü–æ–∫–∞–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω */}
      <div style={{ padding: 20 }}>
        <h1>üëã –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –ª–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>

        {/* –ï—Å–ª–∏ email –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –µ—Å—Ç—å, –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –µ–≥–æ */}
        {userEmail && (
          <p>
            –í—ã –≤–æ—à–ª–∏ –∫–∞–∫: <strong>{userEmail}</strong>
          </p>
        )}

        {/* –ö–Ω–æ–ø–∫–∞ –≤—ã—Ö–æ–¥–∞ */}
        <button
          onClick={handleLogout} // –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã—Ö–æ–¥–∞
          style={{
            marginTop: 20,
            backgroundColor: "#f33", // –ö—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç –∫–Ω–æ–ø–∫–∏
            color: "white",
            border: "none",
            padding: "10px 20px",
            borderRadius: "5px",
            cursor: "pointer",
          }}
        >
          –í—ã–π—Ç–∏
        </button>
        <button onClick={handelFeed}>–õ–µ–Ω—Ç–∞</button>
      </div>
    </PrivateRoute>
  );
};

export default Dashboard; // –≠–∫—Å–ø–æ—Ä—Ç –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞ –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ –¥—Ä—É–≥–∏—Ö –º–µ—Å—Ç–∞—Ö
